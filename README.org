* org-mode configuration                                           :noexport:
#+STARTUP: overview customtime noalign logdone showall
#+TITLE:  Kubernets istio
#+DESCRIPTION: 
#+KEYWORDS: 
#+AUTHOR: Denny Zhang
#+EMAIL:  denny@dennyzhang.com
#+TAGS: noexport(n)
#+PRIORITIES: A D C
#+OPTIONS:   H:3 num:t toc:nil \n:nil @:t ::t |:t ^:t -:t f:t *:t <:t
#+OPTIONS:   TeX:t LaTeX:nil skip:nil d:nil todo:t pri:nil tags:not-in-toc
#+EXPORT_EXCLUDE_TAGS: exclude noexport
#+SEQ_TODO: TODO HALF ASSIGN | DONE BYPASS DELEGATE CANCELED DEFERRED
#+LINK_UP:   
#+LINK_HOME: 
* Summary
#+BEGIN_HTML
<a href="https://www.linkedin.com/in/dennyzhang001"><img src="https://www.dennyzhang.com/wp-content/uploads/sns/linkedin.png" alt="linkedin" /></a>
<a href="https://github.com/DennyZhang"><img src="https://www.dennyzhang.com/wp-content/uploads/sns/github.png" alt="github" /></a>
<a href="https://www.dennyzhang.com/slack" target="_blank" rel="nofollow"><img src="http://slack.dennyzhang.com/badge.svg" alt="slack"/></a>
<a href="https://github.com/DennyZhang"><img align="right" width="200" height="183" src="https://www.dennyzhang.com/wp-content/uploads/denny/watermark/github.png" /></a>

<br/><br/>

<a href="http://makeapullrequest.com" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/PRs-welcome-brightgreen.svg" alt="PRs Welcome"/></a>
#+END_HTML
* My Biased Thinking About istio
Istio helps *developers* and *operators* to change from +monolithic application+ into microservice world.

- network of microservice
- L7 firewall of microservice
- opentracing of microservice
- reduce the engineering effort for common API requirements
#+BEGIN_EXAMPLE
rate limiting, dynamic routing,
circut breaking, client retries,
unexpected outbound traffic
#+END_EXAMPLE
* Challenges By Scenarios
File me [[https://github.com/DennyZhang/challenges-k8s-istio/issues][Issues]] or star [[https://github.com/DennyZhang/challenges-k8s-istio][this repo]].

See more Kubernets sharing from Denny: [[https://github.com/topics/denny-kubernetes][#denny-kubernetes]]

** Scenario-101: istio basic deployment

Deploy a micro service application with istio enabled

- Requirements:
#+BEGIN_EXAMPLE
1. 
#+END_EXAMPLE

- Main Tech:
- See more: [[Scenario-101][Scenario-101]]

** Scenario-102: istio feature: dynamic request routing
- Requirements:
#+BEGIN_EXAMPLE
1. 
#+END_EXAMPLE
- Main Tech:
- See more: [[Scenario-102][Scenario-102]]

** Scenario-103: istio feature: block all egress traffic by default
- Requirements: Avoid leaking information to outside by some malicious egress traffic
#+BEGIN_EXAMPLE
1. 
#+END_EXAMPLE
- Main Tech:
- See more: [[Scenario-103][Scenario-103]]

** Scenario-104: istio feature: retries failed requests
- Requirements:
#+BEGIN_EXAMPLE
1. 
#+END_EXAMPLE
- Main Tech:
- See more: [[Scenario-104][Scenario-104]]

** Scenario-105: istio feature: load balancing
- Requirements:
#+BEGIN_EXAMPLE
1. 
#+END_EXAMPLE
- Main Tech:
- See more: [[Scenario-105][Scenario-105]]

** Scenario-106: istio feature: fault injection
- Requirements:
#+BEGIN_EXAMPLE
1. 
#+END_EXAMPLE
- Main Tech:
- See more: [[Scenario-106][Scenario-106]]

** Scenario-107: istio feature: failure management & circuit breaking
- Requirements:
#+BEGIN_EXAMPLE
1. 
#+END_EXAMPLE
- Main Tech:
- See more: [[Scenario-107][Scenario-107]]

** Scenario-108: istio feature: authentication
- Requirements:
#+BEGIN_EXAMPLE
1. 
#+END_EXAMPLE
- Main Tech:
- See more: [[Scenario-108][Scenario-108]]
* More Resources
License: Code is licensed under [[https://www.dennyzhang.com/wp-content/mit_license.txt][MIT License]].

- YouTube Video
https://www.youtube.com/watch?v=8OjOGJKM98o

- useful link
#+BEGIN_EXAMPLE
https://istio.io/docs/concepts/what-is-istio/overview/
https://github.com/istio/istio
#+END_EXAMPLE

#+BEGIN_HTML
<a href="https://www.dennyzhang.com"><img align="right" width="201" height="268" src="https://raw.githubusercontent.com/USDevOps/mywechat-slack-group/master/images/denny_201706.png"></a>

<a href="https://www.dennyzhang.com"><img align="right" src="https://raw.githubusercontent.com/USDevOps/mywechat-slack-group/master/images/dns_small.png"></a>
#+END_HTML
* #  --8<-------------------------- separator ------------------------>8-- :noexport:
* local notes                                                      :noexport:
You add Istio support to services by deploying a special sidecar proxy throughout your environment that intercepts all network communication between microservices, configured and managed using Istio’s control plane functionality.

Istio addresses many of the challenges faced by developers and operators as monolithic applications transition towards a distributed microservice architecture.
** TODO istio bookinfo example
** DONE istio RouteRule is implemented as k8s CRD
   CLOSED: [2018-07-11 Wed 08:34]
 https://github.com/istio/istio/blob/master/install/kubernetes/helm/istio/charts/pilot/templates/crds.yaml
* DONE envoy vs nginx                                              :noexport:
  CLOSED: [2018-07-10 Tue 23:03]
- Unlike the nginx/haproxy, Envoy is not owned by any single commercial entity. 
  As such, the community focuses only on the right features with the best code, without any commercial considerations. 

- nginx has far more overall features than Envoy as an edge reverse proxy, though we think that most modern service oriented architectures don’t typically make use of them.

- Envoy provides the following main advantages over nginx as an edge proxy:
  https://www.envoyproxy.io/docs/envoy/latest/intro/comparison#id1

‘Envoy is an open source edge and service proxy, designed for cloud-native applications’. It was originally developed by Lift as a high performance C++ distributed proxy designed for standalone services and applications, as well as for large microservices service mesh.

https://piotrminkowski.wordpress.com/2017/10/25/envoy-proxy-with-microservices/

https://www.envoyproxy.io/docs/envoy/latest/intro/comparison

https://blog.getambassador.io/envoy-vs-nginx-vs-haproxy-why-the-open-source-ambassador-api-gateway-chose-envoy-23826aed79ef
* TODO istio with opentracing                                      :noexport:
* HALF istio secure & control: is like L7 firewall                 :noexport:
* DONE istio PM has done a wonderful job: explain a complex service with 4 single words :noexport:
  CLOSED: [2018-08-01 Wed 23:12]
* TODO How to use istio to monitor service                         :noexport:
